<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script>
      var isBrowser = {
        getFetchData: function (url) {
          try {
            var response = fetch(url)
            // .then(function (response) {
            //   if (!response.ok) {
            //     console.log(response);
            //     throw new Error('Network response was not ok + 에러')
            //   }

            //   return response.json();
            // })

            .then(function (response) {
              return response.json()
            })

            .then(function (data) {
              if(data.code === 404){
                console.log('ㅇㅇ 실화');
              }

              if(data.code === 200){
                console.log('ㅇㅇ 200에러 실화');
              }

              console.log(data);
              console.log(data.status);
            })
          } catch (error) {
            console.log(error);
          }
        },

        getAjaxData: function (url) {
          $.ajax({
            method: "get",
            url: url,
            dataType: "json"
          })
          
          .done(function (data) {
            if(data.resultCode === '000'){
              console.log(data);
            }
          })
          
          .fail(function (data) {
            console.log(data);
          })
        },

        getAjaxHandling: function () {
          alert('익스10 이하는 컴터를 바꿔줘')
        }
      };

      var agent = window.navigator.userAgent.toLowerCase();
      var ieName = navigator.appName

      if(ieName === "Microsoft Internet Explorer"){
        isBrowser.getAjaxHandling();
      }

      if (agent.indexOf("chrome") > -1) {
        isBrowser.getFetchData("https://jsonplaceholder.typicode.com/posts/1/comments");
        console.log("패치");
      }

      if (navigator.appName == 'Netscape' && navigator.userAgent.search('Trident') != -1 ) {
        isBrowser.getAjaxData("https://jsonplaceholder.typicode.com/posts/1/comments");
        console.log("아작스");
      }
    </script>
  </body>
</html>
